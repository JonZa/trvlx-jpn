var countries=[{countryCode:"EU",currencyCode:"EUR",currencyName:"Euro",countryName:null},{countryCode:"AX",currencyCode:"EUR",currencyName:"Euro",countryName:"Aland Islands"},{countryCode:"AD",currencyCode:"EUR",currencyName:"Euro",countryName:"Andorra"},{countryCode:"AT",currencyCode:"EUR",currencyName:"Euro",countryName:"Austria"},{countryCode:"BE",currencyCode:"EUR",currencyName:"Euro",countryName:"Belgium"},{countryCode:"BR",currencyCode:"BRL",currencyName:"Brazilian Real",countryName:"Brazil"},{countryCode:"BN",currencyCode:"BND",currencyName:"Brunei Dollar",countryName:"Brunei Darussalam"},{countryCode:"CA",currencyCode:"CAD",currencyName:"Canadian Dollar",countryName:"Canada"},{countryCode:"CL",currencyCode:"CLP",currencyName:"Chilean Peso",countryName:"Chile"},{countryCode:"CN",currencyCode:"CNY",currencyName:"Chinese Renminbi",countryName:"China"},{countryCode:"CY",currencyCode:"EUR",currencyName:"Euro",countryName:"Cyprus"},{countryCode:"CZ",currencyCode:"CZK",currencyName:"Czech Koruna",countryName:"Czech Republic"},{countryCode:"DK",currencyCode:"DKK",currencyName:"Danish Krone",countryName:"Denmark"},{countryCode:"EE",currencyCode:"EUR",currencyName:"Euro",countryName:"Estonia"},{countryCode:"FJ",currencyCode:"FJD",currencyName:"Fijian Dollar",countryName:"Fiji"},{countryCode:"FI",currencyCode:"EUR",currencyName:"Euro",countryName:"Finland"},{countryCode:"FR",currencyCode:"EUR",currencyName:"Euro",countryName:"France"},{countryCode:"PF",currencyCode:"XPF",currencyName:"CFP Franc",countryName:"French Polynesia"},{countryCode:"DE",currencyCode:"EUR",currencyName:"Euro",countryName:"Germany"},{countryCode:"GR",currencyCode:"EUR",currencyName:"Euro",countryName:"Greece"},{countryCode:"HK",currencyCode:"HKD",currencyName:"Hong Kong Dollar",countryName:"Hong Kong"},{countryCode:"HU",currencyCode:"HUF",currencyName:"Hungarian Forint",countryName:"Hungary"},{countryCode:"ID",currencyCode:"IDR",currencyName:"Indonesian Rupiah",countryName:"Indonesia"},{countryCode:"IE",currencyCode:"EUR",currencyName:"Euro",countryName:"Ireland"},{countryCode:"IL",currencyCode:"ILS",currencyName:"Israeli New Sheqel",countryName:"Israel"},{countryCode:"IT",currencyCode:"EUR",currencyName:"Euro",countryName:"Italy"},{countryCode:"JP",currencyCode:"JPY",currencyName:"Japanese Yen",countryName:"Japan"},{countryCode:"KW",currencyCode:"KWD",currencyName:"Kuwaiti Dinar",countryName:"Kuwait"},{countryCode:"LU",currencyCode:"EUR",currencyName:"Euro",countryName:"Luxembourg"},{countryCode:"MY",currencyCode:"MYR",currencyName:"Malaysian Ringgit",countryName:"Malaysia"},{countryCode:"MT",currencyCode:"EUR",currencyName:"Euro",countryName:"Malta"},{countryCode:"MU",currencyCode:"MUR",currencyName:"Mauritian Rupee",countryName:"Mauritius"},{countryCode:"MX",currencyCode:"MXN",currencyName:"Mexican Peso",countryName:"Mexico"},{countryCode:"MC",currencyCode:"EUR",currencyName:"Euro",countryName:"Monaco"},{countryCode:"ME",currencyCode:"EUR",currencyName:"Euro",countryName:"Montenegro"},{countryCode:"NL",currencyCode:"EUR",currencyName:"Euro",countryName:"Netherlands"},{countryCode:"NC",currencyCode:"XPF",currencyName:"CFP Franc",countryName:"New Caledonia"},{countryCode:"NZ",currencyCode:"NZD",currencyName:"New Zealand Dollar",countryName:"New Zealand"},{countryCode:"NO",currencyCode:"NOK",currencyName:"Norwegian Krone",countryName:"Norway"},{countryCode:"OM",currencyCode:"OMR",currencyName:"Omani Rial",countryName:"Oman"},{countryCode:"PG",currencyCode:"PGK",currencyName:"Papua New Guinean Kina",countryName:"Papua New Guinea"},{countryCode:"PH",currencyCode:"PHP",currencyName:"Philippine Peso",countryName:"Philippines"},{countryCode:"PL",currencyCode:"PLN",currencyName:"Polish Zloty",countryName:"Poland"},{countryCode:"PT",currencyCode:"EUR",currencyName:"Euro",countryName:"Portugal"},{countryCode:"WS",currencyCode:"WST",currencyName:"Samoan Tala",countryName:"Samoa"},{countryCode:"SM",currencyCode:"EUR",currencyName:"Euro",countryName:"San Marino"},{countryCode:"SA",currencyCode:"SAR",currencyName:"Saudi Riyal",countryName:"Saudi Arabia"},{countryCode:"SG",currencyCode:"SGD",currencyName:"Singapore Dollar",countryName:"Singapore"},{countryCode:"SK",currencyCode:"EUR",currencyName:"Euro",countryName:"Slovakia"},{countryCode:"SI",currencyCode:"EUR",currencyName:"Euro",countryName:"Slovenia"},{countryCode:"SB",currencyCode:"SBD",currencyName:"Solomon Islands Dollar",countryName:"Solomon Islands"},{countryCode:"ZA",currencyCode:"ZAR",currencyName:"South African Rand",countryName:"South Africa"},{countryCode:"KR",currencyCode:"KRW",currencyName:"South Korean Won",countryName:"South Korea"},{countryCode:"ES",currencyCode:"EUR",currencyName:"Euro",countryName:"Spain"},{countryCode:"SE",currencyCode:"SEK",currencyName:"Swedish Krona",countryName:"Sweden"},{countryCode:"CH",currencyCode:"CHF",currencyName:"Swiss Franc",countryName:"Switzerland"},{countryCode:"TW",currencyCode:"TWD",currencyName:"New Taiwan Dollar",countryName:"Taiwan"},{countryCode:"TH",currencyCode:"THB",currencyName:"Thai Baht",countryName:"Thailand"},{countryCode:"TO",currencyCode:"TOP",currencyName:"Paanga",countryName:"Tonga"},{countryCode:"TR",currencyCode:"TRY",currencyName:"Turkish New Lira",countryName:"Turkey"},{countryCode:"AE",currencyCode:"AED",currencyName:"UAE Dirham",countryName:"United Arab Emirates"},{countryCode:"GB",currencyCode:"GBP",currencyName:"British Pound",countryName:"United Kingdom"},{countryCode:"US",currencyCode:"USD",currencyName:"US Dollar",countryName:"USA"},{countryCode:"VU",currencyCode:"VUV",currencyName:"Vanuatu Vatu",countryName:"Vanuatu"},{countryCode:"VN",currencyCode:"VND",currencyName:"Vietnamese Dong",countryName:"Vietnam"}],rateCalculator={var:{countryCode:"US",currency:"USD",rate:1,countries:{},buyHref:"https://buy.travelex.com.au/au/purchase?productCode1=[[currency]]&amount1=[[amount]]",orderPref:["USD","EUR","GBP","THB","SGD","IDR","JPY","FJD","CNY","NZD"]},init:function(){},bind:{amountChange:function(){rateCalculator.el.from.add(rateCalculator.el.to).on("keyup change",function(){var r=$(this),e=r.val().replace(/[^\d.-]/g,"").split(".");e=e.shift()+(e.length?".":"")+e.join(""),e.split(".")[1]&&e.split(".")[1].length>2&&(e=Number(e).toFixed(2)),r.val(e),rateCalculator.do.updateAmounts($(this))})},currencyChange:function(){rateCalculator.el.dropdown.find(".js__rate-change").on("click",function(r){r.preventDefault();var e=$(this);rateCalculator.var.rate=Number(e.data("rate")),rateCalculator.var.currency=e.data("currency"),rateCalculator.var.countryCode=e.data("countrycode"),rateCalculator.el.currency.html(e.find(".fx-conversion__flag-image")[0].outerHTML+e.find(".fx-conversion__currency-code")[0].outerHTML),rateCalculator.do.updateAmounts(rateCalculator.el.from)})}},do:{init:function(){rateCalculator.bind.amountChange(),rateCalculator.do.fetchData()},updateAmounts:function(r){var e=r.attr("id").split("fx-rateCalculator__")[1],c=0;rateCalculator.el.textCurrency.text(rateCalculator.var.currency),rateCalculator.el.textConversion.text(rateCalculator.var.rate),"from"===e?(c=Number(rateCalculator.el.from.val())*rateCalculator.var.rate,rateCalculator.el.to.val(c.toFixed(2))):(c=Number(rateCalculator.el.to.val())/rateCalculator.var.rate,rateCalculator.el.from.val(c.toFixed(2)));var a=rateCalculator.var.buyHref;a=a.split("[[amount]]").join(rateCalculator.el.from.val()),rateCalculator.el.orderButton.attr("href",a)},fetchData:function(){$.getJSON("https://api-au.travelex.net/salt/rates/current?key=Travelex&site=%2Fau",function(r){$.each(countries,function(r,e){e.countryName&&(rateCalculator.var.countries[e.countryCode]=e)});var e={},c={};$.each(rateCalculator.var.countries,function(c,a){var o=a.currencyCode,n=a.countryCode,u=a.countryName;$.each(r.rates,function(r,e){o===r&&(conversionRate=e)}),e[n]={currencyCode:o,countryName:u,countryCode:n,conversionRate:conversionRate,hasCard:!1}}),$.each(r.rates,function(r,a){if(r.indexOf("MCP_")<0||r.indexOf("_R")>-1)return!0;var o=a,n=r.split("MCP_")[1],u="";$.each(rateCalculator.var.countries,function(r,a){a.currencyCode===n&&(u=a.countryCode,c[u]={currencyCode:n,countryName:a.countryName,countryCode:a.countryCode,conversionRate:o,hasCard:!0},e[u].hasCard=!0)})}),rateCalculator.var.cashRates=$.extend({},e),rateCalculator.var.cardRates=$.extend(e,c),rateCalculator.do.populateDropdown()})},populateDropdown:function(){var r=[],e=[],c=!1;$.each(rates,function(a,o){var n="",u=o.countryName,t=o.countryCode,y=o.currencyCode,d=o.conversionRate,C=o.hasCard;"EUR"!=o.currencyCode.toUpperCase()?(e.push(y),n+='<div data-countrycode="'+t+'" data-country="'+u+'" class="fx-conversion__dropdown-item dropdown-item js__rate-change" data-rate="'+d+'" data-currency="'+y+'" data-hascard="'+C+'">',n+='<span class="fx-conversion__flag-image fx-flag--'+t.toLowerCase()+'"></span>',n+=u+" (",n+='<span class="fx-conversion__currency-code">'+y+"</span>",n+=")</div>",r.push(n)):c||(e.push(y),n+='<div data-countrycode="DE" data-country="Germany" class="fx-conversion__dropdown-item dropdown-item js__rate-change" data-rate="'+d+'" data-currency="'+y+'" data-hascard="'+C+'">',n+='<span class="fx-conversion__flag-image fx-flag--eu"></span>',n+="Euro (",n+='<span class="fx-conversion__currency-code">'+y+"</span>",n+=")</div>",r.push(n),c=!0)});var a=[],o=r.slice();$.each(rateCalculator.var.orderPref,function(r,c){for(;(j=$.inArray(c,e))>-1;)e.splice(j,1)[0],a.push(o.splice(j,1)[0])}),r=a.concat(o),rateCalculator.el.dropdown.html(r),rateCalculator.bind.currencyChange(),rateCalculator.el.dropdown.find('.js__rate-change[data-countrycode="'+rateCalculator.var.countryCode+'"]').click()}}};rateCalculator.do.init();